<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Weekend ‚ù§Ô∏è</title>
<style>
:root {
  --bg1: #ffdde1;
  --bg2: #ee9ca7;
  --ink: #2b2b2b;
  --white: #fff;
  --shadow: 0 10px 30px rgba(0,0,0,.12);
}
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body {
  font-family: system-ui, sans-serif;
  background: radial-gradient(1200px 800px at 20% 10%, #ffe7ea, transparent 60%),
              linear-gradient(135deg, var(--bg1), var(--bg2));
  overflow: hidden;
  color: var(--ink);
}

/* Header */
.header {
  position: fixed; inset-inline: 0; top: 0; padding: 16px 20px;
  display: flex; justify-content: center; pointer-events: none;
  font-weight: 700; letter-spacing: .5px; text-align: center;
}
.header span {
  background: rgba(255,255,255,.6);
  padding: 8px 14px;
  border-radius: 999px;
  box-shadow: var(--shadow);
}

/* Play area */
.stage {
  position: relative;
  width: 100%;
  height: 100%;
}

/* The runaway heart */
.heart {
  position: absolute;
  left: 40%; top: 45%;
  transform: translate(-50%, -50%);
  font-size: clamp(42px, 10vw, 80px);
  cursor: pointer;
  user-select: none;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
  transition: transform 0.25s ease, left 0.4s ease, top 0.4s ease;
}
.heart:active { transform: translate(-50%, -50%) scale(.9) rotate(-6deg); }

/* Tooltip */
.hint {
  position: absolute;
  top: -38px; left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,.85);
  padding: 6px 10px;
  border-radius: 10px;
  font-size: 12px;
  box-shadow: var(--shadow);
  white-space: nowrap;
  animation: float 2s ease-in-out infinite;
}
@keyframes float { 0%,100%{transform:translate(-50%,0)} 50%{transform:translate(-50%,-6px)} }

/* Win overlay */
.overlay {
  position: fixed; inset: 0;
  display: grid; place-items: center;
  background: rgba(0,0,0,.08);
  backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .35s ease;
  z-index: 5;
}
.overlay.show { opacity: 1; pointer-events: auto; }

.card {
  background: rgba(255,255,255,.95);
  border-radius: 20px;
  padding: 28px 22px;
  box-shadow: var(--shadow);
  text-align: center;
  max-width: min(480px, 92vw);
}
.title { font-size: clamp(22px, 5vw, 30px); margin: 0 0 8px; }
.subtitle { margin: 0 0 18px; opacity: .8; }

.btns {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}
.btn {
  border: 0;
  padding: 12px 16px;
  border-radius: 999px;
  box-shadow: var(--shadow);
  background: linear-gradient(135deg, #ffecd2, #fcb69f);
  cursor: pointer;
  font-weight: 700;
}

/* Confetti canvas */
canvas#confetti {
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: 6;
}

/* Fallback reveal */
.reveal {
  position: fixed;
  right: 12px;
  bottom: 12px;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(255,255,255,.7);
  border: 0;
  box-shadow: var(--shadow);
  font-weight: 700;
  cursor: pointer;
  z-index: 3;
}

/* Sparkle trail */
.sparkle {
  position: absolute;
  font-size: 16px;
  animation: fadeUp 1s forwards;
}
@keyframes fadeUp {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-20px); }
}
</style>
</head>
<body>
<div class="header"><span>Happy Surprise ‚ú®</span></div>
<div class="stage" id="stage">
  <div class="heart" id="heart" role="button">
    <div class="hint">Catch me! üòâ</div>
    ‚ù§Ô∏è
  </div>
</div>

<!-- Win overlay -->
<div class="overlay" id="overlay" aria-hidden="true">
  <div class="card">
    <h1 class="title">You caught my heart! üíò</h1>
    <p class="subtitle">My heart is with you dear.ü•∞</p>
    <div class="btns">
      <button class="btn" id="again">Play again</button>
      <button class="btn" id="hug">Claim a hug ü§ó</button>
    </div>
  </div>
</div>

<button class="reveal" id="revealBtn">Reveal message</button>
<canvas id="confetti"></canvas>

<script>
const stage = document.getElementById('stage');
const heart = document.getElementById('heart');
const overlay = document.getElementById('overlay');
const again = document.getElementById('again');
const revealBtn = document.getElementById('revealBtn');
const hug = document.getElementById('hug');

const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

function placeRandom() {
  const rect = stage.getBoundingClientRect();
  const size = heart.offsetWidth;
  const x = Math.random() * (rect.width - size) + size / 2;
  const y = Math.random() * (rect.height - size) + size / 2;
  heart.style.left = x + 'px';
  heart.style.top = y + 'px';
  heart.style.transform = 'translate(-50%, -50%) scale(1.1)';
  setTimeout(()=>heart.style.transform='translate(-50%, -50%) scale(1)',200);
  sparkleAt(x, y);
}

function sparkleAt(x, y) {
  const s = document.createElement('div');
  s.className = 'sparkle';
  s.textContent = '‚ú®';
  s.style.left = `${x}px`;
  s.style.top = `${y}px`;
  stage.appendChild(s);
  setTimeout(()=>s.remove(), 1000);
}

let fleeing = true;
const SAFE_RADIUS = 120;

function onPointerMove(e) {
  if (!fleeing || window.innerWidth < 768) return;
  const r = heart.getBoundingClientRect();
  const hx = r.left + r.width / 2;
  const hy = r.top + r.height / 2;
  const px = e.clientX, py = e.clientY;
  const dx = hx - px, dy = hy - py;
  const dist = Math.hypot(dx, dy);
  if (dist < SAFE_RADIUS) {
    const rect = stage.getBoundingClientRect();
    const step = (SAFE_RADIUS - dist) * 1.2;
    const nx = clamp(hx + (dx / (dist || 1)) * step, rect.left + 40, rect.right - 40);
    const ny = clamp(hy + (dy / (dist || 1)) * step, rect.top + 60, rect.bottom - 60);
    heart.style.left = (nx - rect.left) + 'px';
    heart.style.top = (ny - rect.top) + 'px';
  }
}

function win() {
  fleeing = false;
  overlay.classList.add('show');
  overlay.setAttribute('aria-hidden', 'false');
  launchConfetti(500);
  clearInterval(mobileMoveInterval);
}

heart.addEventListener('click', win, { passive: true });
heart.addEventListener('touchend', win, { passive: true });
window.addEventListener('pointermove', onPointerMove, { passive: true });
revealBtn.addEventListener('click', win);
again.addEventListener('click', () => {
  overlay.classList.remove('show');
  overlay.setAttribute('aria-hidden', 'true');
  fleeing = true;
  placeRandom();
  if (window.innerWidth < 768) startMobileMovement();
});
hug.addEventListener('click', () => {
  alert('One big squeeze coming right up! ü§ó');
});
placeRandom();

// Mobile movement
let mobileMoveInterval;
function startMobileMovement() {
  if (window.innerWidth < 768) {
    clearInterval(mobileMoveInterval);
    mobileMoveInterval = setInterval(() => {
      if (fleeing) placeRandom();
    }, 1000);
  }
}
startMobileMovement();

// Confetti
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
let parts = [];
function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
addEventListener('resize', resize); resize();
function launchConfetti(count=300) {
  parts = Array.from({ length: count }, () => ({
    x: Math.random() * canvas.width,
    y: -10,
    r: 2 + Math.random() * 4,
    s: 1 + Math.random() * 3,
    a: Math.random() * Math.PI * 2
  }));
  animate();
  setTimeout(()=>parts=[], 3000);
}
function animate() {
  if (!parts.length) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (const p of parts) {
    p.y += p.s;
    p.x += Math.sin(p.a += 0.03);
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fill();
  }
  requestAnimationFrame(animate);
}
</script>
</body>
</html>
